
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet/less" type="text/css" href="/theme/stylesheet/style.less">
    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/2.5.1/less.min.js" type="text/javascript"></script>


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="/theme/pygments/github.min.css">



  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/solid.css">












 

<meta name="author" content="Bhavin Tandel" />
<meta name="description" content="Audio is part of our life which exists in many forms like, voice messages, podcasts, songs, lectures, recorded conversations etc. These files are really hard to process by computer and so it just stays in magnetic disk or expensive disk and never actually used proactively unless its needed. However, machines …" />
<meta name="keywords" content="ml">


  <meta property="og:site_name" content="Professional Portfolio"/>
  <meta property="og:title" content="Exploring ML Tools - Transcribe"/>
  <meta property="og:description" content="Audio is part of our life which exists in many forms like, voice messages, podcasts, songs, lectures, recorded conversations etc. These files are really hard to process by computer and so it just stays in magnetic disk or expensive disk and never actually used proactively unless its needed. However, machines …"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="/blogs/ml-aws-transcribe/2020/05/"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2020-05-29 18:53:00+01:00"/>
  <meta property="article:modified_time" content="2020-05-29 18:53:00+01:00"/>
  <meta property="article:author" content="/author/bhavin-tandel.html">
  <meta property="article:section" content="blogs"/>
  <meta property="article:tag" content="ml"/>
  <meta property="og:image" content="">

  <title>Professional Portfolio &ndash; Exploring ML Tools - Transcribe</title>


</head>
<body class="light-theme">

<aside>
  <div>
    <a href="/">
      <img src="/theme/img/profile.png" alt="" title="">
    </a>

    <h1>
      <a href="/"></a>
    </h1>



    <nav>
      <ul class="list">


            <li>
              <a target="_self"
                 href="/pages/about.html#about">
                About
              </a>
            </li>
            <li>
              <a target="_self"
                 href="/pages/contact.html#contact">
                Contact
              </a>
            </li>
            <li>
              <a target="_self"
                 href="/pages/resume.html#resume">
                Resume
              </a>
            </li>

      </ul>
    </nav>

    <ul class="social">
      <li>
        <a class="sc-LinkedIn"
           href="https://www.linkedin.com/in/bhavintandel/"
           target="_blank">
          <i class="fa-brands fa-LinkedIn"></i>
        </a>
      </li>
      <li>
        <a class="sc-Github"
           href="https://github.com/bhavintandel"
           target="_blank">
          <i class="fa-brands fa-Github"></i>
        </a>
      </li>
    </ul>
  </div>

</aside>
  <main>

<nav>
  <a href="/">Home</a>

  <a href="/archives.html">Archives</a>
  <a href="/categories.html">Categories</a>
  <a href="/tags.html">Tags</a>


</nav>

<article class="single">
  <header>
      
    <h1 id="ml-aws-transcribe">Exploring ML Tools - Transcribe</h1>
    <p>
      Posted on Fri 29 May 2020 in <a href="/category/blogs.html">blogs</a>

    </p>
  </header>


  <div>
    <p>Audio is part of our life which exists in many forms like, voice messages, podcasts, songs, 
lectures, recorded conversations etc. These files are really hard to process by computer and so it just stays in magnetic 
disk or expensive disk and never actually used proactively unless its needed. However, machines have become very 
intelligent in process texts. And thus, so we can convert audio to text and put machine to work for getting insight. </p>
<p><img alt="AWS Transcribe Logo" src="/blogs/ml-aws-transcribe/2020/05/aws-transcribe-working.jpg"></p>
<h2>Introduction</h2>
<p>There have pretty good research in speech-to-text conversion with model like Hidden Markow Models(HMM), 
Dynamic Time Warping and many neural networks. AWS have provide fully managed service called AWS Transcribe which 
can be used to transcribe audio, video files and also transcribe medical files.</p>
<h2>How it Works?</h2>
<ul>
<li>Input can be provided to AWS transcribe in following ways:<ul>
<li>Files in audio format using <em>StartTranscriptionJob</em>.</li>
<li>Bi-directional HTTP/2 stream using <em>StartStreamTranscription</em>.</li>
<li>Websocket protocol.</li>
</ul>
</li>
<li>It returns transcription with highest level of confidence, however, you can additional transcribes by setting
 <em>ShowAlternatives</em> to true and MaxAlternatives to your required number.</li>
<li>For speaker identification(diarization), the result is best when the number of speaker set is 
 same as actual number of speakers in the clip.</li>
<li>For Channel Identification, it split the file into multiple audio files and provide multiple transcribe along with 
combined file. The overlap audios are transcribe based on audio start time. This can be done by setting 
<em>ChannelIdentification</em> flag.</li>
<li>You can provide custom vocabularies which can be of upto 50 Kb size. The data can be in list format or table format.</li>
<li>Automatically redacts sensitive PII data which includes Bank Account Number, Credit Card details, Phone numbers, etc.
It will replace it with <strong>[PII]</strong> tag. We can set <em>RedactionType</em> flag to <strong>PII</strong> under ContentRedaction.</li>
<li>You can also enable Queuing for the transcribing as there are limited slots available for job and 
when queuing is enabled then it will process as soon as slots are available in FIFO order. </li>
</ul>
<h2>Features</h2>
<ul>
<li>Support transcribing of many languages. Detail list can be found 
<a href="https://docs.aws.amazon.com/transcribe/latest/dg/what-is-transcribe.html">here</a>.</li>
<li>Identifies speakers in the audio.</li>
<li>Transcribe separate channels like in call centre recording, it can give two separate files, 
one for representative and other of customer.</li>
<li>Streaming audio transcribing.</li>
<li>Custom Vocabulary</li>
</ul>
<h2>Usecase</h2>
<ul>
<li>Generate captioning of video recording.</li>
<li>Generating subtitles of the video.</li>
<li>Call centre recording analysis.</li>
</ul>
<h2>Usage</h2>
<p>The AWS transcribe can be used via:
* AWS cli
* AWS Console
* AWS SDK</p>
<h2>Input</h2>
<ul>
<li>
<p>Accepted input format is FLAC, MP3, MP4, or WAV file format.  Should be less than 4 hours in length or 2 GB in size. 
Latest updated limits can be found <a href="https://docs.aws.amazon.com/transcribe/latest/dg/input.html">here</a>.</p>
</li>
<li>
<p>Transcribing Numbers:</p>
<ul>
<li>There are set of rules for transcribing the numbers which can be found
 <a href="https://docs.aws.amazon.com/transcribe/latest/dg/how-numbers.html">here</a>.</li>
<li>In few languages, the numbers are transcribed into digits. In others, the numbers are converted into word.</li>
</ul>
</li>
</ul>
<h2>Process</h2>
<p>Following steps will walk through transcribing steps via python SDK.</p>
<ul>
<li>Initialize aws transcribe client</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">boto3</span>
<span class="n">transcribe_client</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s1">&#39;transcribe&#39;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;eu-west-1&#39;</span><span class="p">)</span>
</code></pre></div>

<ul>
<li>Start Transcribing job</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">short_job_uri</span> <span class="o">=</span> <span class="s2">&quot;https://s3.eu-west-1.amazonaws.com/exploring-ml-tools/aws-transcribe/assets/VodaFoneCallCenter.mp3&quot;</span>
<span class="c1"># Start Transcribing job</span>
<span class="n">job_name</span> <span class="o">=</span> <span class="s2">&quot;TEST_JOB_With_VodaFone&quot;</span>
<span class="n">trascribe_response</span> <span class="o">=</span> <span class="n">transcribe_client</span><span class="o">.</span><span class="n">start_transcription_job</span><span class="p">(</span>
    <span class="n">TranscriptionJobName</span><span class="o">=</span><span class="n">job_name</span><span class="p">,</span>
    <span class="n">Media</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;MediaFileUri&#39;</span><span class="p">:</span> <span class="n">short_job_uri</span><span class="p">},</span>
    <span class="n">MediaFormat</span><span class="o">=</span><span class="s1">&#39;mp3&#39;</span><span class="p">,</span>
    <span class="n">LanguageCode</span><span class="o">=</span><span class="s1">&#39;en-IN&#39;</span><span class="p">,</span>
    <span class="n">Settings</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;ShowAlternatives&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s1">&#39;MaxAlternatives&#39;</span><span class="p">:</span> <span class="mi">6</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre></div>

<ul>
<li>Get Transcribing job details</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># Get Transcribing job</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">transcribe_client</span><span class="o">.</span><span class="n">get_transcription_job</span><span class="p">(</span><span class="n">TranscriptionJobName</span><span class="o">=</span><span class="n">job_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">status</span><span class="p">[</span><span class="s1">&#39;TranscriptionJob&#39;</span><span class="p">][</span><span class="s1">&#39;TranscriptionJobStatus&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;COMPLETED&#39;</span><span class="p">,</span> <span class="s1">&#39;FAILED&#39;</span><span class="p">]:</span>
        <span class="k">break</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Not ready yet...&quot;</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
</code></pre></div>

<ul>
<li>Downloading transcript</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">if</span> <span class="n">status</span><span class="p">[</span><span class="s1">&#39;TranscriptionJob&#39;</span><span class="p">][</span><span class="s1">&#39;TranscriptionJobStatus&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;COMPLETED&#39;</span><span class="p">:</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="n">status</span><span class="p">[</span><span class="s1">&#39;TranscriptionJob&#39;</span><span class="p">][</span><span class="s1">&#39;Transcript&#39;</span><span class="p">][</span><span class="s1">&#39;TranscriptFileUri&#39;</span><span class="p">]</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
    <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

<span class="n">json_data</span><span class="p">[</span><span class="s1">&#39;results&#39;</span><span class="p">][</span><span class="s1">&#39;transcripts&#39;</span><span class="p">]</span>
<span class="c1"># Output &gt;&gt;&gt;[{&#39;transcript&#39;: &#39;his taste for a phone call centre.&#39;}]</span>
</code></pre></div>

<p>If you dont specify output bucket then transcripts will be deleted after expiration of job that is in 90 days.</p>
<h2>Output</h2>
<p>The output files can be stored in your output bucket if specified in job or by default transcribing job stores
 the data up to 90 days.
The output will contain alternatives as well which show other output with various confidence level. </p>
<p>Also, if we have enabled redaction then the redacted file will replace the PII value with [PII] tag.</p>
<h2>Cleanup</h2>
<ul>
<li>Deleting Transcribing job</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># Delete Transcribing job</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">transcribe_client</span><span class="o">.</span><span class="n">delete_transcription_job</span><span class="p">(</span>
    <span class="n">TranscriptionJobName</span><span class="o">=</span><span class="s1">&#39;TEST_JOB&#39;</span>
<span class="p">)</span>
</code></pre></div>

<p>Transcribing job expires in 90 days.</p>
<h2>Findings</h2>
<ul>
<li>It takes approximately 1.5 minutes to transcribe 3-second-long audio and 3.5 mins to transcribe 27 mins audio.</li>
<li>Good transcribing of UK and US English.</li>
<li>When transcribing english, the only language supported to transcribe using redaction enabled was en-US, for other 
you will need to enable it on your AWS account.</li>
</ul>
<h2>Pricing</h2>
<ul>
<li>No upfront cost</li>
<li>Free tier: <ul>
<li>60 mins/month for 12 months</li>
</ul>
</li>
<li>On demand:<ul>
<li>Detailed list can be found <a href="https://aws.amazon.com/transcribe/pricing/">here</a></li>
</ul>
</li>
</ul>
<h2>Bibliography</h2>
<ul>
<li><a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/transcribe.html">AWS Python SDK Client</a></li>
<li><a href="https://www.kaggle.com/wiradkp/mini-speech-diarization">Kaggle Data</a></li>
<li><a href="https://docs.aws.amazon.com/transcribe/latest/dg/what-is-transcribe.html">AWS Docs</a></li>
<li><a href="https://www.slideshare.net/AmazonWebServices/automate-for-efficiency-with-amazon-transcribe-and-amazon-translate">AWS Transcribe slide</a></li>
</ul>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="/tag/ml.html">ml</a>
    </p>
  </div>






</article>

<footer>
<p>&copy; 2024 </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Professional Portfolio ",
  "url" : "",
  "image": "",
  "description": ""
}
</script>
</body>
</html>