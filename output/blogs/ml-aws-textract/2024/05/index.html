
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet/less" type="text/css" href="/theme/stylesheet/style.less">
    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/2.5.1/less.min.js" type="text/javascript"></script>


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="/theme/pygments/github.min.css">



  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/solid.css">












 

<meta name="author" content="Bhavin Tandel" />
<meta name="description" content="Documents have been part of our lives since very long time, however, its not always so easy to find something in document. With the new advances in machine learning we can actually digitize our document and thus put it to good use. Introduction In this post, we will be exploring …" />
<meta name="keywords" content="ml">


  <meta property="og:site_name" content="Professional Portfolio"/>
  <meta property="og:title" content="Exploring ML Tools - Amazon Textract"/>
  <meta property="og:description" content="Documents have been part of our lives since very long time, however, its not always so easy to find something in document. With the new advances in machine learning we can actually digitize our document and thus put it to good use. Introduction In this post, we will be exploring …"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="/blogs/ml-aws-textract/2024/05/"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2024-05-08 22:31:00+01:00"/>
  <meta property="article:modified_time" content="2024-05-08 22:31:00+01:00"/>
  <meta property="article:author" content="/author/bhavin-tandel.html">
  <meta property="article:section" content="blogs"/>
  <meta property="article:tag" content="ml"/>
  <meta property="og:image" content="">

  <title>Professional Portfolio &ndash; Exploring ML Tools - Amazon Textract</title>


</head>
<body class="light-theme">

<aside>
  <div>
    <a href="/">
      <img src="/theme/img/profile.png" alt="" title="">
    </a>

    <h1>
      <a href="/"></a>
    </h1>



    <nav>
      <ul class="list">


            <li>
              <a target="_self"
                 href="/pages/about.html#about">
                About
              </a>
            </li>
            <li>
              <a target="_self"
                 href="/pages/contact.html#contact">
                Contact
              </a>
            </li>
            <li>
              <a target="_self"
                 href="/pages/resume.html#resume">
                Resume
              </a>
            </li>

      </ul>
    </nav>

    <ul class="social">
      <li>
        <a class="sc-LinkedIn"
           href="https://www.linkedin.com/in/bhavintandel/"
           target="_blank">
          <i class="fa-brands fa-LinkedIn"></i>
        </a>
      </li>
      <li>
        <a class="sc-Github"
           href="https://github.com/bhavintandel"
           target="_blank">
          <i class="fa-brands fa-Github"></i>
        </a>
      </li>
    </ul>
  </div>

</aside>
  <main>

<nav>
  <a href="/">Home</a>

  <a href="/archives.html">Archives</a>
  <a href="/categories.html">Categories</a>
  <a href="/tags.html">Tags</a>


</nav>

<article class="single">
  <header>
      
    <h1 id="ml-aws-textract">Exploring ML Tools - Amazon Textract</h1>
    <p>
      Posted on Wed 08 May 2024 in <a href="/category/blogs.html">blogs</a>

    </p>
  </header>


  <div>
    <p>Documents have been part of our lives since very long time, however, its not always so easy to find something in document. With the new advances in machine learning we can actually digitize our document and thus put it to good use.</p>
<h2>Introduction</h2>
<p>In this post, we will be exploring Amazon Textract which has the capabilities to extract text and data from documents. It uses Optical Character Recognition(OCR) and augmented AI to detects the document layout and key element from the it. 
Amazon textract has been trained on tens of millions of documents including invoices, contracts, receipts, insurance claims, policy documents, etc.</p>
<h2>Features</h2>
<ul>
<li>Key-value pair extraction</li>
<li>Table extraction</li>
<li>Bounding Box for all the extracted result</li>
<li>Confidence score for every extracted result</li>
<li>It can handle multi page document</li>
</ul>
<h2>Usecase</h2>
<p>Following is one of the example of how Textract can be used to process large scale documents using complementary aws services.</p>
<ul>
<li>Large scale document processing with Amazon Textract</li>
</ul>
<h2>Usage</h2>
<p>The service can be used directly from aws console or using api in your preferred language like java, python, javascript, etc. We will be using aws python sdk - boto3 to interact with the service.</p>
<h3>Input</h3>
<p>It accepts images of format (JPEG/PNG) and PDFs .
For Images, we can perform synchronous or asynchronous call with reading it as bytes or passing s3 location.
To process PDF, only asynchronous call is supported via s3 location.
Initialize the Textract client in python, if you are planning to run extract job on files under s3 bucket then, region_name should be same as the location on data.</p>
<p><img alt="Reciept" src="/blogs/ml-aws-textract/2024/05/IMG_2093.JPG"></p>
<h4>Detexting text in Image</h4>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">boto3</span>
<span class="n">textract_client</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s1">&#39;textract&#39;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;eu-west-1&#39;</span><span class="p">)</span>
<span class="c1"># Reading image file</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;assets/IMG_2093.JPG&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="c1"># Detecting text in Image</span>
<span class="n">img_response_1</span> <span class="o">=</span> <span class="n">textract_client</span><span class="o">.</span><span class="n">detect_document_text</span><span class="p">(</span>
    <span class="n">Document</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;Bytes&#39;</span><span class="p">:</span> <span class="n">image</span>
    <span class="p">})</span>
</code></pre></div>

<p>The reponse contains lot of information regarding the the analysis. First of all we get DocumentMetadata which has information like page number of the analysis. And we get many Blocks which can be one of the following value 'KEY_VALUE_SET'|'PAGE'|'LINE'|'WORD'|'TABLE'|'CELL'|'SELECTION_ELEMENT'. </p>
<p>To extract text from the output:</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">img_response_1</span><span class="p">[</span><span class="s1">&#39;Blocks&#39;</span><span class="p">]:</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">block</span><span class="p">[</span><span class="s1">&#39;BlockType&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;LINE&#39;</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">block</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">])</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>Gate Gourmet Switzerland GmbH
(d/b/a Gate Retail Onboard)
Flight Flight Date 2072 24/05/2017 Sector MUC-LTN 19:25:00
Bar Set 7454
Transaction Type SALE
Transaction Date e:24/05/2017
Transaction Time 10:25 AM
Transaction 5b42b840b1c
Item
Price Oty
Water Still
1.80
3
Coffee Reg
2.50
I
SubTotal
4.30
Net Subtotal (GBP)
4.30
Cash (EUR)
5.50
Terinal 00-02-78-b0-e6-ef 00-00
CUSTOMER COPY
Please retain for Vour records
</code></pre></div>

<p>With the above information we also get the actual location of that on a page with Bounding box information. Which can we used to create the indexed search engine of our documents and thus make it searchable on word level.</p>
<p>Following are some example on running Textract on S3 object</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Analyzing text in Image</span>
<span class="n">img_response_2</span> <span class="o">=</span> <span class="n">textract_client</span><span class="o">.</span><span class="n">analyze_document</span><span class="p">(</span>
    <span class="n">Document</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;Bytes&#39;</span><span class="p">:</span> <span class="n">image</span>
    <span class="p">},</span>
    <span class="n">FeatureTypes</span><span class="o">=</span><span class="p">[</span>
        <span class="s1">&#39;TABLES&#39;</span><span class="p">,</span>
    <span class="p">])</span>
<span class="c1"># Asynchronous call to extract text from pdf</span>
<span class="n">asset_bucket</span> <span class="o">=</span> <span class="s2">&quot;&lt;bucket_name&gt;&quot;</span>
<span class="n">pdf_prefix</span> <span class="o">=</span> <span class="s2">&quot;amazon-textract/assets/pdf/receipt_uber.pdf&quot;</span>
<span class="n">pdf_response_1</span> <span class="o">=</span> <span class="n">textract_client</span><span class="o">.</span><span class="n">start_document_text_detection</span><span class="p">(</span>
        <span class="n">DocumentLocation</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;S3Object&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;Bucket&#39;</span><span class="p">:</span> <span class="n">asset_bucket</span><span class="p">,</span>
                <span class="s1">&#39;Name&#39;</span><span class="p">:</span> <span class="n">pdf_prefix</span>
            <span class="p">}</span>
        <span class="p">})</span>
<span class="n">job_id_1</span> <span class="o">=</span> <span class="n">pdf_response_1</span><span class="p">[</span><span class="s1">&#39;JobId&#39;</span><span class="p">]</span>
<span class="c1">## check the progress</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">textract_client</span><span class="o">.</span><span class="n">get_document_text_detection</span><span class="p">(</span>
    <span class="n">JobId</span><span class="o">=</span><span class="n">job_id</span>
<span class="p">)</span>
<span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;JobStatus&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;IN_PROGRESS&#39;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Job is still in progress&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Extraction job completed&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre></div>

<h2>Findings</h2>
<p>Some key findings are:
* It returns information of bouding box from where the text has been extracted.
* It is not angle invariant, that is, document or image to be analyze must be aligned vertically.</p>
<h2>Pricing</h2>
<ul>
<li>No upfront cost</li>
<li>Free tier: <ul>
<li>Detecting Text - 1000 pages/month for first 3 months</li>
<li>Analyzing Document - 100 pages/month for first 3 months</li>
</ul>
</li>
<li>Detecting Text: <ul>
<li>First 1 Million pages - $0.0015/page - $1.5/1000 pages</li>
<li>Over 1 Million pages - $0.0006/page - $0.6/1000 pages</li>
</ul>
</li>
</ul>
<p>The other details for analyze document api can be found at: https://aws.amazon.com/textract/pricing/</p>
<h2>Bibliography</h2>
<p>amazon-textract-serverless-large-scale-document-processing
https://aws.amazon.com/
https://aws.amazon.com/textract/pricing/</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="/tag/ml.html">ml</a>
    </p>
  </div>






</article>

<footer>
<p>&copy; 2024 </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Professional Portfolio ",
  "url" : "",
  "image": "",
  "description": ""
}
</script>
</body>
</html>